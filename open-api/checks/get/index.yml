summary: Get all checks
description: >
  This endpoint allows you to collect checks for specified accounts.
  Note that there is a 10k limit to the maximum number of overall results that can be returned.
  Paging will not work for higher than this limit. To fetch larger numbers, segment your requests
  using account and region filtering.
  On larger accounts, filter requests per account, per region, per service.
parameters:
  - in: query
    name: accountIds
    schema:
      type: string
    required: true
    description: A comma-separated list of Cloud Conformity accountIds.
  - $ref: ../../shared-schemas/check-page.yml#/parameters/page
  - $ref: ../../shared-schemas/check-filter.yml#/parameters/filter

responses:
  200:
    description: OK
    content:
      application/json:
        schema:
          type: object
          properties:
            data:
              $ref: ../../shared-schemas/checks-response.yml
            meta:
              type: object
              properties:
                total:
                  type: number
                  example: 1
  400:
    description: Bad Request. Cannot process request due to a client error.
    content:
      application/json:
        schema:
          type: object
          properties:
            errors:
              type: array
              items:
                type: object
                properties:
                  status:
                    type: number
                    example: 400
                  message:
                    type: string
                    example: query parameter accountIds is required
  401:
    description: Unauthorized. The requester user does not have enough privilege
    content:
      application/json:
        schema:
          type: object
          properties:
            errors:
              type: array
              items:
                type: object
                properties:
                  status:
                    type: number
                    example: 401
                  message:
                    type: string
                    example: Unauthorized
  403:
    description: Forbidden. This happens when a valid api key is not provided or the user does not have access to the supplied account.
    content:
      application/json:
        schema:
          oneOf:
            - $ref: ../../shared-schemas/403.yml
            - $ref: ../../shared-schemas/403-json-api-spec.yml
        example:
          errors:
            - status: 403
              detail: Unauthorised
  422:
    description: Unprocessable Entity
    content:
      application/json:
        schema:
          type: object
          properties:
            errors:
              type: array
              items:
                type: object
                properties:
                  status:
                    type: integer
                    example: 422
                    description: Error code.
                  source:
                    type: object
                    properties:
                      pointer:
                        type: string
                        example: /data/attributes/page[size]
                  details:
                    type: string
                    example: page[size] must be greater than 0 and less than or equal to 1000

  500:
    description: Bad Request. Cannot process request due to a client error.
    content:
      application/json:
        schema:
          type: object
          properties:
            errors:
              type: array
              items:
                type: object
                properties:
                  status:
                    type: integer
                    example: 500
                    description: Error code.
                  detail:
                    type: string
                    example: Internal Server Error
security:
  - Authorizer: []
